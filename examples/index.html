<!DOCTYPE html>
<html>
<head>
    <title>Calendula</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="../source/calendula.dev.css" />
    <script src="../source/calendula.dev.js"></script>
    <style>
        #api-methods
        {
            position: absolute;
            left: 20px;
            top: 20px;
        }
        
        #example-button
        {
            position: absolute;
            left: 30%;
            top: 100px;
        }
        
        .page_theme_normal
        {
            background-color: none;
            color: #000;
        }
        
        .page_theme_black
        {
            background-color: black;
            color: #fff;
        }
    </style>
</head>
<body class="page_theme_normal">

    <div id="api-methods">
        <input type="button" value="open" id="cl-open" />
        <input type="button" value="close" id="cl-close" />
        <input type="button" value="toggle" id="cl-toggle" />
        <input type="button" value="destroy" id="cl-destroy" />
        <br /><br />
        <table>
            <tr>
                <td>
                    theme
                </td>
                <td>
                    <select id="cl-theme">
                        <option value="normal">normal</option>
                        <option value="black">black</option>
                        <option value="ios">ios</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    lang
                <td>
                    <select id="cl-lang"></select>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="checkbox" checked="checked" id="cl-autoclose" /> <label for="cl-autoclose">autoclose</label>
                </td>
            </tr>
        </table>
    </div>
    
    <button id="example-button"></button>
    
<script>
window.addEventListener('load', function() {
    var getById = function(id) {
        return document.getElementById(id);
    };
    
    var clLang = getById('cl-lang');
    Calendula._langs.sort().forEach(function(el) {
        var opt = document.createElement('option');
        opt.value = opt.text = el;
        clLang.add(opt);
    });
        
    var clOpen = getById('cl-open'),
        clClose = getById('cl-close'),
        clToggle = getById('cl-toggle'),
        clDestroy = getById('cl-destroy'),
        clTheme = getById('cl-theme'),
        clAutoclose = getById('cl-autoclose'),
        button = getById('example-button'),
        cl = new Calendula({
            lang: clLang.value,
            value: new Date(),
            linkTo: button,
            autoclose: clAutoclose.checked,
            theme: clTheme.value,
            onselect: function(e, value) {
                updateButton();
            }
        }),
        updateButton = function() {
            button.innerHTML = cl._buttonText();
        };
        
    cl.open();
    updateButton();
    
    button.addEventListener('click', function() {
        cl.toggle();
    }, false);
    
    clTheme.addEventListener('change', function() {
        cl.setting('theme', this.value);
        document.body.className = 'page_theme_' + this.value;
        
        setTimeout(function() {
            cl.open();
        }, 300);
    }, false);
    
    clAutoclose.addEventListener('change', function() {
        cl.setting('autoclose', this.checked);
    }, false);    
    
    document.body.className = 'page_theme_' + clTheme.value;

    clLang.addEventListener('change', function() {
        cl.setting('lang', this.value);
        
        setTimeout(function() {
            cl.open();
        }, 300);
    }, false);

    clOpen.addEventListener('click', function() {
        cl.open();
    }, false);
    
    clClose.addEventListener('click', function() {
        cl.close();
    }, false);
    
    clToggle.addEventListener('click', function() {
        cl.toggle();
    }, false);
    
    clDestroy.addEventListener('click', function() {
        cl.destroy();
    }, false);
}, false);

</script>
</body>
</html>